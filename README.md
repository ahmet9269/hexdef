# HexArch Project Scaffolder

A Visual Studio Code extension designed to streamline the development of C++ applications using Hexagonal Architecture (Ports & Adapters). It provides powerful scaffolding tools, build management, and middleware (Kafka) integration helpers.

## Features

### üöÄ Project Scaffolding
*   **Create New Project**: Generates a complete C++ project structure based on Hexagonal Architecture principles.
*   **Template-Based**: Uses customizable JSON templates (`schemas/app.json`) to define directory structures and initial files.
*   **Dynamic Configuration**: Automatically configures project names, pseudo-app names, and middleware settings.

### üõ†Ô∏è Build Management
*   **Run Make**: Automatically detects the project root and runs `make` in the integrated terminal.
*   **Regenerate Code**: Performs a clean build (`make clean && make build`) to ensure code consistency.
*   **Smart Detection**: Uses marker files (`.project_root`) to locate the correct build directory regardless of your current file position.

### üì° Middleware & Datagram Management
*   **Create New Datagram**: Quickly generate XML datagram definitions for your middleware (default: Kafka).
    *   Automatically places files in both "Gray" (Application) and "Dark" (Infrastructure) layers.
    *   Smart path detection finds the correct `adapters/common/...` directories.
*   **Add/Remove Datagrams**: A visual interface to manage datagrams included in your project.
    *   Import datagrams from a central repository.
    *   Toggle Publisher/Subscriber roles.
    *   Updates project configuration XMLs automatically.

## Setup & Configuration

This extension relies on environment variables to customize its behavior. You can set these in your shell or `.env` file before launching VS Code.

| Variable | Description | Default |
| :--- | :--- | :--- |
| `MW_NAME` | Middleware name (e.g., Kafka, RabbitMQ) | `Kafka` |
| `DB` | Database type | `postgres` |
| `DATAGRAM_DIR_PATH` | Path to the central repository of datagram XMLs | *(Required for Add/Remove)* |
| `SCHEMAS_DIR` | Path to the directory containing templates | `schemas/` inside extension |
| `NEW_DATAGRAM_TARGET_NAME` | Target folder name for new datagrams | `new_datagram` |

## Commands

Access these commands via the Command Palette (`Ctrl+Shift+P`) or the File Explorer context menu:

*   `HexArch: Create New Project`: Start a new project wizard.
*   `HexArch: Run Make`: Build the current project.
*   `HexArch: Regenerate Code`: Clean and rebuild the project.
*   `Create New Datagram`: Create a new XML datagram definition.
*   `Add/Remove Datagram`: Open the visual manager for project datagrams.

## Project Structure

The extension uses marker files to understand your project layout:
*   `.project_root`: Marks the root of the project.
*   `.project_dark`: Marks the infrastructure (Dark) layer.
*   `.project_gray`: Marks the application (Gray) layer.

## Requirements

*   VS Code ^1.85.0
*   `make` utility
*   C++ Compiler (g++, clang, etc.)

---
*Generated by HexArch Team*
